#!/usr/bin/env bash
# Script to count occurrences of IP and HTTP code in Apache logs
# Ensure the log file exists and is readable
LOG_FILE="apache-access.log"
[ ! -f "$LOG_FILE" ] && exit 1

# Parse the log, count occurrences, and format output
awk '{count[$1, $9]++} END {for (key in count) {split(key, arr, SUBSEP); printf "%5d %s %s\n", count[key], arr[1], arr[2]}}' apache-access.log | sort -nr
