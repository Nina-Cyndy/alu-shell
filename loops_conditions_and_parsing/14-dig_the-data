#!/usr/bin/env bash
# Script to count occurrences of IP and HTTP code in Apache logs
# Ensure the log file exists and is readable
LOG_FILE="apache-access.log"
[ ! -f "$LOG_FILE" ] && exit 1

# Parse the log, count occurrences, and format output
awk '{count[$1 " " $9]++} END {for (key in count) printf "%5d %s\n", count[key], key}' apache-access.log | sort -k1,1nr -k2,2
